@page "/dashboard"
@inject NavigationManager Nav
@inject CalendarService calendarService
@inject ItemService itemService

<h3>Dashboard</h3>
    <!-- ROW 1 -->
    <div class="row">
        <div class="col-6">
        <div class="row fullsize">
            <div class="col">
                <Card Class="fullsize" Title="Recently Opened">
                    <Body>
                            @if(_last5Entries is not null)
                            {
                            @if(_last5Entries.Count == 0)
                            {
                                <label>Nothing to display...</label>
                            }
                            else
                            {
                                @foreach(var entry in _last5Entries)
                                    {
                                            <br/>
                                            <button class="btn btn-link" @onclick="() => OpenEntry(entry.Id)">📋 @entry.Title</button>
                                    }
                            }
                            }
                            else if(_last5Entries is null)
                            {
                                <label>Nothing to display...</label>
                            }
                        </Body>
                </Card>
            </div>
        </div>

        </div>
        <div class="col-6">
            @* Weeks Events Card *@
            <Card Title="This weeks's events" Style="height: 50%">
                    <Body>
                        <div style="display: inline">
                            @if(_calendarEntries is not null)
                            {
                                @if(_calendarEntries.Count == 0)
                                {
                                    <label>No recent Entries...</label>
                                }
                                else
                                {
                                    @foreach(var entry in _calendarEntries)
                                    {
                                        @if(entry is not null)
                                        {
                                            <label>- @entry.Entry.Title</label>
                                        }
                                    }
                                }
                            }
                            else if(_calendarEntries is null)
                            {
                                <label>No Events this week!</label>
                            }
                        </div>
                    </Body>
                </Card>

                @* QuickCard *@
                <Card Title="Quick note" Style="margin-top: 30px;">
                    <Body >
                                <TextArea Rows="4" Style="height: 200px" @bind-Value="@quicknoteContent" />
                                <Button @onclick="() => CreateNewQucikNote(quicknoteContent)" Type="@ButtonType.Primary" Style="float: right; margin-top: 5px">Add to Quicknotes</Button>
                    </Body>
                </Card>
        </div>
    </div>

<style>
    .fullsize{
        height: 100%
    }
    .top-buffer { 
        margin-top:20px; 
    }
</style>
